<!DOCTYPE html>
<html lang="en" ng-app="zmxk">
<head>

<!-- start: Meta -->
<meta charset="utf-8" />
<title>SimpliQ - Flat & Responsive Bootstrap Admin Template</title>
<meta name="description"
	content="SimpliQ - Flat & Responsive Bootstrap Admin Template." />
<meta name="author" content="Łukasz Holeczek" />
<meta name="keyword"
	content="SimpliQ, Dashboard, Bootstrap, Admin, Template, Theme, Responsive, Fluid, Retina" />
<!-- end: Meta -->

<!-- start: Mobile Specific -->
<meta name="viewport" content="width=device-width, initial-scale=1" />
<!-- end: Mobile Specific -->

<!-- start: CSS -->
<link href="css/bootstrap.min.css" rel="stylesheet" />
<link href="css/bootstrap-responsive.min.css" rel="stylesheet" />
<link href="css/style.min.css" rel="stylesheet" />
<link href="css/style-responsive.min.css" rel="stylesheet" />
<link href="css/retina.css" rel="stylesheet" />
<!-- end: CSS -->


<!-- The HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>
	  	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<link id="ie-style" href="css/ie.css" rel="stylesheet">
	<![endif]-->

<!--[if IE 9]>
		<link id="ie9style" href="css/ie9.css" rel="stylesheet">
	<![endif]-->

<!-- start: Favicon and Touch Icons -->
<link rel="apple-touch-icon-precomposed" sizes="144x144"
	href="ico/apple-touch-icon-144-precomposed.png" />
<link rel="apple-touch-icon-precomposed" sizes="114x114"
	href="ico/apple-touch-icon-114-precomposed.png" />
<link rel="apple-touch-icon-precomposed" sizes="72x72"
	href="ico/apple-touch-icon-72-precomposed.png" />
<link rel="apple-touch-icon-precomposed"
	href="ico/apple-touch-icon-57-precomposed.png" />
<link rel="shortcut icon" href="ico/favicon.png" />
<!-- end: Favicon and Touch Icons -->

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>

<body ng-controller="MainController as main">

	<!-- start: Header -->
	<div class="navbar" ng-include="'header_nav_bar.html'"></div>
	<div class="container-fluid-full">
		<div class="row-fluid">
			<div id="sidebar-left" class="span2" ng-include="'side_nav_bar.html'"></div>
			<!-- end: Main Menu -->

			<!-- start: Content -->
			<div id="content" class="span10">
				<div class="row-fluid" ng-include="includePage()"></div>
			</div>
			<!-- end: Content -->

		</div>
		<!--/fluid-row-->

		<div class="modal hide fade" id="myModal">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">×</button>
				<h3>Settings</h3>
			</div>
			<div class="modal-body">
				<p>Here settings can be configured...</p>
			</div>
			<div class="modal-footer">
				<a href="#" class="btn" data-dismiss="modal">Close</a> <a href="#"
					class="btn btn-primary">Save changes</a>
			</div>
		</div>

		<div class="clearfix" ng-include="'footer.html'"></div>

	</div>
	<!--/.fluid-container-->

	<!-- start: JavaScript-->
	<script src="js/jquery-1.10.2.min.js"></script>
	<script src="js/angular.min.js"></script>
	<script src="js/jquery-migrate-1.2.1.min.js"></script>
	<script src="js/jquery-ui-1.10.3.custom.min.js"></script>
	<script src="js/jquery.ui.touch-punch.js"></script>
	<script src="js/modernizr.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/jquery.cookie.js"></script>
	<script src='js/fullcalendar.min.js'></script>
	<script src='js/jquery.dataTables.min.js'></script>
	<script src="js/excanvas.js"></script>
	<script src="js/jquery.flot.js"></script>
	<script src="js/jquery.flot.pie.js"></script>
	<script src="js/jquery.flot.stack.js"></script>
	<script src="js/jquery.flot.resize.min.js"></script>
	<script src="js/jquery.flot.time.js"></script>

	<script src="js/jquery.chosen.min.js"></script>
	<script src="js/jquery.uniform.min.js"></script>
	<script src="js/jquery.cleditor.min.js"></script>
	<script src="js/jquery.noty.js"></script>
	<script src="js/jquery.elfinder.min.js"></script>
	<script src="js/jquery.raty.min.js"></script>
	<script src="js/jquery.iphone.toggle.js"></script>
	<script src="js/jquery.uploadify-3.1.min.js"></script>
	<script src="js/jquery.gritter.min.js"></script>
	<script src="js/jquery.imagesloaded.js"></script>
	<script src="js/jquery.masonry.min.js"></script>
	<script src="js/jquery.knob.modified.js"></script>
	<script src="js/jquery.sparkline.min.js"></script>
	<script src="js/counter.min.js"></script>
	<script src="js/raphael.2.1.0.min.js"></script>
	<script src="js/justgage.1.0.1.min.js"></script>
	<script src="js/jquery.autosize.min.js"></script>
	<script src="js/retina.js"></script>
	<script src="js/jquery.placeholder.min.js"></script>
	<script src="js/wizard.min.js"></script>
	<script src="js/core.min.js"></script>
	<script src="js/charts.min.js"></script>
	<script src="js/custom.min.js"></script>
	<script>
		var zmxk = angular.module('zmxk', []);
		var currentPage = "users";
		zmxk.controller('MainController', [ '$scope','$location', function($scope, $location) {
			$scope.enroll_form_data = {};
			$scope.$location = $location;
			
			$scope.userId = $scope.$location.search().userId;  

			$scope.includePage = function() {
				var returnPage = "user_list.html";
				switch(currentPage) {
					case  "userList":
						returnPage = "user_list.html";
						break;
					case "eventList":
						returnPage = "event_list.html";
						break;
					case "eventEnroll":
						returnPage = "event_enroll.html";
						break
					
				}
				return returnPage;
			}
			
			$scope.init = function() {
				//TODO: init if no cookie token, return to login page
				
				// init enroll
				console.log("initEnrollPage")
				if(!angular.isUndefined($scope.userId) && !angular.isUndefined($scope.$location.search().page)) {
					console.log($scope.userId);
					currentPage = $scope.$location.search().page;
				}
				//TODO get from user api
				$scope.enroll_form_data.name = "Mac Fang";
				$scope.enroll_form_data.mobileNum = "13706516916";
			}
			
			$scope.processForm = function() {
				//TODO process
				console.log($scope.enroll_form_data);
			}
			
			
			$scope.init();
		} ]);
		
		zmxk.controller('SideBarController', [ '$scope','$controller', function($scope, $controller) {
			//var mainCtrlScope = $scope.$new();
			//$controller('MainController',{$scope : mainCtrlScope });
			//mainCtrlScope.initEnrollPage();
			$scope.processPages = function (pageType) {
				currentPage = pageType;
				console.log(currentPage);
			}
		} ]);
		
		angular.element(document).ready(function () {
			

		});
	</script>
	<!-- end: JavaScript-->

</body>
</html>