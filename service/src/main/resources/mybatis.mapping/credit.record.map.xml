<?xml version="1.0" encoding="UTF-8"?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  
     "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="CREDIT_RECORD">
	<select id="create" parameterType="com.smartool.common.dto.CreditRecord">
		insert creditRecords (id,
		userId,eventId,
		operatorId,creditRuleType,displayName,rank,creditRuleId,credit,goldenMedal,silverMedal,bronzeMedal,
		createdTime,
		lastModifiedTime)
		values
		(#{id},#{userId},#{eventId},#{operatorId},#{creditRuleType},#{displayName},#{rank},#{creditRuleId},#{credit},#{goldenMedal},#{silverMedal},#{bronzeMedal},now(),now())
	</select>

	<select id="search" parameterType="Map"
		resultType="com.smartool.common.dto.CreditRecord">
		select * from creditRecords
		<trim prefix="where" prefixOverrides="and | or">
			<if test="userId != null">
				and userId = #{userId}
			</if>
			<if test="start != null">
				<![CDATA[and lastModifiedTime > #{start}]]>
			</if>
			<if test="end != null">
				<![CDATA[and lastModifiedTime < #{end}]]>
			</if>
		</trim>
	</select>

	<select id="getById" parameterType="String"
		resultType="com.smartool.common.dto.CreditRecord">
		select * from creditRecords where id = #{id}
	</select>
</mapper>
