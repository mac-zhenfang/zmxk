<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport"
	content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>动态设置多边形区域的形状</title>
<style type="text/css">
* {
	margin: 0px;
	padding: 0px;
}

body, button, input, select, textarea {
	font: 12px/16px Verdana, Helvetica, Arial, sans-serif;
}

#info {
	margin-top: 10px;
}
</style>
<link href="assets/css/font-awesome.min.css" rel="stylesheet" />
<link href="assets/css/font-awesome-ie7.min.css" rel="stylesheet" />
<!-- CUSTOM STYLE CSS -->
<link href="assets/css/style.css" rel="stylesheet" />
<link href="assets/css/zmxk.css" rel="stylesheet" />
<script charset="utf-8" src="http://map.qq.com/api/js?v=2.exp"></script>
<script>
	var init = function() {
		var center = new qq.maps.LatLng(31.23687744140625, 121.44641198730469);
		var map = new qq.maps.Map(document.getElementById('container'), {
			center : center,
			zoom : 13
		});
		var polygon1 = new qq.maps.Polygon({
			map : map,
			strokeColor : new qq.maps.Color(0, 0, 0, 0.8),
			strokeWeight : 0,
			fillColor : qq.maps.Color.fromHex("#f30855", 0.5),
			visible : true
		});

		var polygon2 = new qq.maps.Polygon({
			strokeColor : new qq.maps.Color(0, 0, 0, 0.8),
			strokeWeight : 1,
			fillColor : qq.maps.Color.fromHex("#f30853", 0.5),
			visible : true,
			map : map
		});
		var polygon3 = new qq.maps.Polygon({
			map : map
		});
		var path1 = [
				new qq.maps.LatLng(31.23687744140625, 121.44641198730469),
				new qq.maps.LatLng(31.224819946289063, 121.4373779296875),
				new qq.maps.LatLng(31.22589111328125, 121.43094543457032),
				new qq.maps.LatLng(31.25335693359375, 121.43876330566407) ];

		var path2 = [
				new qq.maps.LatLng(31.20941162109375, 121.46895812988281),
				new qq.maps.LatLng(31.208340454101563, 121.4703369140625),
				new qq.maps.LatLng(31.20941162109375, 121.46895812988281),
				new qq.maps.LatLng(31.20941162109375, 121.4724814453125) ];
		var index = 0;

		polygon1.setPath(path1);
		polygon2.setPath(path2);
		// polygon2.setPath(path2);
		// polygon3.setPath(path3);
		/* setInterval(function(){
		     if(index==0){
		       polygon.setPath(path1);
		     };
		     if(index==1){
		       polygon.setPath(path2);
		     };
		     if(index==2){
		        polygon.setPath(path3);
		     };
		     index++;
		     if(index>2){
		         index=0;
		     }
		 },200);*/
	}
</script>
</head>
<body ng-controller="MainController as main" ng-init="init()">
	<div style="width: 603px; height: 300px" id="container"></div>
	<div id="info">
		<p>添加一个多边形区域，并动态改变多边形的形状。</p>
	</div>
	<script src="assets/js/angular.js"></script>
	<script src="assets/js/angular-resource.min.js"></script>
	<script src="assets/js/angular-route.min.js"></script>
	<script src="assets/js/angular-cookies.min.js"></script>

	<script type="text/javascript">
		var zmxk = angular.module('zmxk', [ 'ngResource', 'ngRoute',
				'ngCookies' ]);
		zmxk.config([ '$resourceProvider', function($resourceProvider) {
			// Don't strip trailing slashes from calculated URLs
			$resourceProvider.defaults.stripTrailingSlashes = false;
		} ]);

		zmxk
				.service(
						'dataService',
						[
								'$resource',
								'$q',
								function($resource, $q) {
									var dataResoruce = $resource(
											"/service/smartool/api/v1/data/heats",
											{

											},
											{
												getHeats : {
													url : zmxk.user_register_uri,
													isArray : true,
													method : 'GET',
													headers : {
														'Content-Type' : 'application/x-www-form-urlencoded'
													}
												}
											});
									this.getHeats = function(_cityId,
											_timestamp) {
										var defer = $q.defer();
										dataResoruce.getHeats({
											cityId : _cityId,
											timestamp : _timestamp
										}, function(body, headers) {
											console.log(body.data);
											defer.resolve(body);
										}, function(body, headers) {
											console.log(body.data);
											defer.reject(body);
										})
										return defer.promise;
									}
								} ]);
		zmxk.controller('MainController', [
				'$scope',
				'$location',
				'$window',
				'dataService',
				function($scope, $location, $window, dataService) {

					$scope.init = function() {
						var center = new qq.maps.LatLng(31.23687744140625,
								121.44641198730469);
						var map = new qq.maps.Map(document
								.getElementById('container'), {
							center : center,
							zoom : 13
						});

						dataService.getHeats(1, 1438226022000).then(
								function(data) {
									angular.forEach(data,
											function(heat, index) {
												console.log(heat);
											})
								}, function(data) {

								})
					}
				} ]);
		angular.bootstrap(document, [ 'zmxk' ]);
	</script>
</body>
</html>
